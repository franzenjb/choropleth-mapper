<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIS Database & Join Tool Demo - American Red Cross</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .glass-card { 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(255, 255, 255, 0.2); 
            border-radius: 15px; 
            padding: 30px; 
            color: white; 
            margin: 20px 0; 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .map-container { 
            height: 400px; 
            border-radius: 10px; 
            overflow: hidden; 
            margin: 20px 0; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .feature-card { 
            background: rgba(255, 255, 255, 0.05); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 10px; 
            padding: 20px; 
            margin: 10px 0; 
            transition: all 0.3s ease; 
        }
        .feature-card:hover { 
            background: rgba(255, 255, 255, 0.1); 
            transform: translateY(-2px); 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .stat-box { 
            background: rgba(255, 255, 255, 0.1); 
            border-radius: 10px; 
            padding: 15px; 
            text-align: center; 
            margin: 10px 0; 
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn-custom { 
            background: rgba(255, 255, 255, 0.2); 
            border: 1px solid rgba(255, 255, 255, 0.3); 
            color: white; 
            border-radius: 25px; 
            padding: 10px 25px; 
            transition: all 0.3s ease; 
            text-decoration: none;
            display: inline-block;
        }
        .btn-custom:hover { 
            background: rgba(255, 255, 255, 0.3); 
            color: white; 
            transform: translateY(-1px); 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .data-inventory { 
            max-height: 350px; 
            overflow-y: auto; 
            background: rgba(0, 0, 0, 0.1); 
            border-radius: 10px; 
            padding: 15px; 
        }
        .logo { 
            font-size: 2.5rem; 
            font-weight: bold; 
            background: linear-gradient(45deg, #fff, #f0f0f0); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            text-align: center;
        }
        .badge-custom {
            background: rgba(40, 167, 69, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-left: 5px;
        }
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 10px 0;
            color: #f8f9fa;
        }
        .system-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .tool-demo {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!-- Header -->
        <div class="row">
            <div class="col-12">
                <div class="glass-card">
                    <div class="logo">üó∫Ô∏è GIS Database & Join Tool</div>
                    <p class="lead text-center">Emergency Management Geospatial Analysis Platform</p>
                    <p class="text-center text-light">Built for American Red Cross - Comprehensive CSV-to-Map Join System</p>
                    
                    <!-- Quick Action Buttons -->
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <a href="https://franzenjb.github.io/choropleth-mapper/" target="_blank" class="btn btn-custom w-100" style="font-size: 1.1em; padding: 15px;">
                                üöÄ LAUNCH MAIN APPLICATION
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="https://github.com/franzenjb/choropleth-mapper/actions" target="_blank" class="btn btn-custom w-100" style="font-size: 1.1em; padding: 15px;">
                                üìä VIEW DEPLOYMENT STATUS
                            </a>
                        </div>
                    </div>
                    <p class="text-center mt-2" style="font-size: 0.9em; color: rgba(255,255,255,0.8);">
                        Check deployment status first (green ‚úì = ready), then launch application
                    </p>
                </div>
            </div>
        </div>

        <!-- System Overview -->
        <div class="row">
            <div class="col-md-6">
                <div class="glass-card">
                    <h3>üìä System Capabilities</h3>
                    <div class="system-stats">
                        <div class="stat-box">
                            <h4>3.3GB</h4>
                            <small>Geospatial Database</small>
                        </div>
                        <div class="stat-box">
                            <h4>17</h4>
                            <small>Geographic Datasets</small>
                        </div>
                        <div class="stat-box">
                            <h4>100%</h4>
                            <small>US Coverage</small>
                        </div>
                        <div class="stat-box">
                            <h4>5</h4>
                            <small>Export Formats</small>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <strong>üîç Intelligent Field Detection</strong>
                        <span class="badge-custom">AUTO</span><br>
                        <small>Automatically identifies FIPS codes, ZIP codes, and location names in your CSV</small>
                    </div>
                    
                    <div class="feature-card">
                        <strong>üß† Fuzzy String Matching</strong>
                        <span class="badge-custom">AI</span><br>
                        <small>Handles variations in county/place names using Levenshtein distance algorithms</small>
                    </div>
                    
                    <div class="feature-card">
                        <strong>üìÅ Multiple Export Formats</strong>
                        <span class="badge-custom">PROFESSIONAL</span><br>
                        <small>GeoJSON, Shapefile, CSV, GeoPackage, and ArcGIS Feature Service outputs</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="glass-card">
                    <h3>üìã Available Geographic Datasets</h3>
                    <div class="data-inventory">
                        <div class="feature-card">
                            <strong>US Counties:</strong> 3,221 features<br>
                            <small>Complete national coverage with Red Cross volunteer integration</small>
                        </div>
                        <div class="feature-card">
                            <strong>ZIP Codes:</strong> 33,092 features<br>
                            <small>Complete national ZIP code boundaries (ZCTA)</small>
                        </div>
                        <div class="feature-card">
                            <strong>Census Tracts:</strong> Sample coverage<br>
                            <small>Demographic analysis potential with ACS integration</small>
                        </div>
                        <div class="feature-card">
                            <strong>Census Block Groups:</strong> Sample coverage<br>
                            <small>Fine-grain demographic mapping capabilities</small>
                        </div>
                        <div class="feature-card">
                            <strong>Places/Cities:</strong> Sample coverage<br>
                            <small>Incorporated places and census designated places</small>
                        </div>
                        <div class="feature-card">
                            <strong>Emergency Infrastructure:</strong><br>
                            <small>Fire stations, hospitals, FEMA flood zones, evacuation routes</small>
                        </div>
                        <div class="feature-card">
                            <strong>Transportation:</strong><br>
                            <small>Major roads and highway networks</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Demo Section -->
        <div class="row">
            <div class="col-12">
                <div class="glass-card">
                    <h3>üó∫Ô∏è Live Demo - Red Cross Florida Counties</h3>
                    <p>Interactive visualization of American Red Cross volunteer deployment and emergency shelter capacity</p>
                    <div id="map" class="map-container"></div>
                    
                    <div class="row mt-3">
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>10</h4>
                                <small>Counties Mapped</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>1,595</h4>
                                <small>Total Volunteers</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>64</h4>
                                <small>Emergency Shelters</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>12.1M</h4>
                                <small>Population Served</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Join Results -->
        <div class="row">
            <div class="col-md-6">
                <div class="glass-card">
                    <h3>üìà Sample Join Analysis Results</h3>
                    <div class="tool-demo">
                        <h5>üîó CSV-to-Shapefile Join Summary</h5>
                        <div class="code-block">
<strong>Input:</strong> sample_red_cross_data.csv (10 records)
<strong>Target:</strong> us_counties.json (3,221 features)

<strong>Join Results:</strong>
‚úÖ Total Geographic Features: 3,221
‚úÖ Total CSV Records: 10  
‚úÖ Successful Joins: 10 (100% success rate)
‚úÖ Coverage: 0.3% of US counties
‚ö†Ô∏è Unmatched Geographic: 3,211
‚úÖ Unmatched CSV: 0 (perfect CSV match)

<strong>Matched Counties (by FIPS):</strong>
‚Ä¢ 12086 - Miami-Dade, FL (245 volunteers, 12 shelters)
‚Ä¢ 12011 - Broward, FL (189 volunteers, 8 shelters)  
‚Ä¢ 12099 - Palm Beach, FL (156 volunteers, 6 shelters)
‚Ä¢ 12095 - Orange, FL (198 volunteers, 9 shelters)
‚Ä¢ 12057 - Hillsborough, FL (167 volunteers, 7 shelters)
</div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="glass-card">
                    <h3>üõ†Ô∏è Command-Line Tools Available</h3>
                    
                    <div class="tool-demo">
                        <h5>üì¶ GIS Inventory Scanner</h5>
                        <div class="code-block">
python gis_inventory.py
# Scans all geospatial assets
# Generates metadata database
# Creates coverage reports
                        </div>
                    </div>

                    <div class="tool-demo">
                        <h5>üîó CSV-Shapefile Joiner</h5>
                        <div class="code-block">
python csv_shapefile_joiner.py \\
  --csv sample_red_cross_data.csv \\
  --layer counties \\
  --csv-field FIPS_Code \\
  --geo-field FIPS \\
  --output red_cross_counties.geojson
                        </div>
                    </div>

                    <div class="tool-demo">
                        <h5>üìä Streamlit Web Interface</h5>
                        <div class="code-block">
streamlit run streamlit_app.py
# Interactive web interface
# Drag-and-drop CSV upload
# Real-time join suggestions
                        </div>
                    </div>
                </div>
            </div>
        </row>

        <!-- Technical Specifications -->
        <div class="row">
            <div class="col-md-6">
                <div class="glass-card">
                    <h3>‚öôÔ∏è Technical Architecture</h3>
                    <div class="feature-card">
                        <strong>üêç Core Engine:</strong> Python + GeoPandas + Shapely<br>
                        <small>Professional geospatial data processing and analysis</small>
                    </div>
                    <div class="feature-card">
                        <strong>üóÉÔ∏è Data Sources:</strong> US Census Bureau TIGER/Line + HIFLD<br>
                        <small>Authoritative government geospatial datasets (2024)</small>
                    </div>
                    <div class="feature-card">
                        <strong>üîç Matching Algorithm:</strong> Fuzzy String Matching<br>
                        <small>Levenshtein distance for location name variations</small>
                    </div>
                    <div class="feature-card">
                        <strong>üìä Web Interface:</strong> Streamlit + Folium<br>
                        <small>Interactive maps with real-time data visualization</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="glass-card">
                    <h3>üìã Use Cases & Applications</h3>
                    <div class="feature-card">
                        <strong>üÜò Emergency Management</strong><br>
                        <small>Resource allocation, volunteer deployment, shelter capacity planning</small>
                    </div>
                    <div class="feature-card">
                        <strong>üìä Demographic Analysis</strong><br>
                        <small>ACS integration for population, income, housing statistics</small>
                    </div>
                    <div class="feature-card">
                        <strong>üå™Ô∏è Disaster Response</strong><br>
                        <small>Flood zone mapping, evacuation route planning, infrastructure assessment</small>
                    </div>
                    <div class="feature-card">
                        <strong>üéØ Program Planning</strong><br>
                        <small>Service area definition, resource gap analysis, impact measurement</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="row">
            <div class="col-12">
                <div class="glass-card text-center">
                    <h3>üöÄ Development Status</h3>
                    <p>This platform includes both command-line tools and web interfaces for comprehensive GIS operations</p>
                    <div class="row">
                        <div class="col-md-4">
                            <a href="https://github.com/franzenjb/choropleth-mapper" target="_blank" class="btn btn-custom w-100">üì¶ Download Tools from GitHub</a>
                        </div>
                        <div class="col-md-4">
                            <a href="https://franzenjb.github.io/choropleth-mapper/" target="_blank" class="btn btn-custom w-100">üìä Launch Main Application</a>
                        </div>
                        <div class="col-md-4">
                            <a href="https://github.com/franzenjb/choropleth-mapper/actions" target="_blank" class="btn btn-custom w-100">üöÄ View Deploy Status</a>
                        </div>
                    </div>
                    <p class="mt-3 text-light"><small>Tools download government data automatically ‚Ä¢ 3.3GB total when fully populated</small></p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize map centered on Florida
        const map = L.map('map').setView([27.8, -82.7], 6);
        
        // Add base layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        // Red Cross county data from the actual CSV
        const redCrossCounties = [
            {name: "Miami-Dade", lat: 25.7617, lng: -80.1918, volunteers: 245, shelters: 12, population: 2716940, fips: "12086"},
            {name: "Broward", lat: 26.1901, lng: -80.3659, volunteers: 189, shelters: 8, population: 1944375, fips: "12011"},
            {name: "Palm Beach", lat: 26.7056, lng: -80.0659, volunteers: 156, shelters: 6, population: 1496770, fips: "12099"},
            {name: "Orange", lat: 28.5383, lng: -81.3792, volunteers: 198, shelters: 9, population: 1429908, fips: "12095"},
            {name: "Hillsborough", lat: 27.9904, lng: -82.3018, volunteers: 167, shelters: 7, population: 1459762, fips: "12057"},
            {name: "Pinellas", lat: 27.8661, lng: -82.6404, volunteers: 134, shelters: 5, population: 916542, fips: "12103"},
            {name: "Duval", lat: 30.3322, lng: -81.6557, volunteers: 145, shelters: 6, population: 995567, fips: "12031"},
            {name: "Lee", lat: 26.5628, lng: -81.9495, volunteers: 98, shelters: 4, population: 760822, fips: "12071"},
            {name: "Polk", lat: 28.0836, lng: -81.9498, volunteers: 87, shelters: 4, population: 725046, fips: "12105"},
            {name: "Volusia", lat: 29.0275, lng: -81.1031, volunteers: 76, shelters: 3, population: 553543, fips: "12127"}
        ];

        // Add styled markers for each county
        redCrossCounties.forEach(county => {
            // Calculate marker size based on volunteer count
            const radius = Math.sqrt(county.volunteers) / 1.5;
            
            const marker = L.circleMarker([county.lat, county.lng], {
                radius: radius,
                fillColor: getVolunteerColor(county.volunteers),
                color: '#fff',
                weight: 2,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);

            // Detailed popup with all information
            marker.bindPopup(`
                <div style="font-family: Arial, sans-serif; line-height: 1.4;">
                    <h5 style="margin: 0 0 10px 0; color: #dc3545;">üÜò ${county.name} County</h5>
                    <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; margin-bottom: 8px;">
                        <strong>FIPS Code:</strong> ${county.fips}
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;">
                        <div><strong>üôã‚Äç‚ôÇÔ∏è Volunteers:</strong> ${county.volunteers}</div>
                        <div><strong>üè† Shelters:</strong> ${county.shelters}</div>
                    </div>
                    <div style="background: #e9ecef; padding: 6px; border-radius: 4px;">
                        <strong>üë• Population Served:</strong> ${county.population.toLocaleString()}
                    </div>
                </div>
            `);
        });

        // Color scheme for volunteer counts
        function getVolunteerColor(volunteers) {
            return volunteers > 200 ? '#800026' :
                   volunteers > 150 ? '#BD0026' :
                   volunteers > 120 ? '#E31A1C' :
                   volunteers > 100 ? '#FC4E2A' :
                   volunteers > 80  ? '#FD8D3C' :
                                      '#FEB24C';
        }

        // Add map legend
        const legend = L.control({position: 'bottomright'});
        legend.onAdd = function (map) {
            const div = L.DomUtil.create('div', 'info legend');
            const grades = [80, 100, 120, 150, 200];
            const labels = ['<strong>Red Cross Volunteers</strong>'];

            for (let i = 0; i < grades.length; i++) {
                labels.push(
                    '<i style="background:' + getVolunteerColor(grades[i] + 1) + '; width: 18px; height: 18px; display: inline-block; margin-right: 5px;"></i> ' +
                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] : '+')
                );
            }

            div.innerHTML = labels.join('<br>');
            div.style.background = 'rgba(255, 255, 255, 0.9)';
            div.style.padding = '10px';
            div.style.borderRadius = '5px';
            div.style.fontSize = '12px';
            div.style.lineHeight = '1.4';
            return div;
        };
        legend.addTo(map);

        // Add animations to cards
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.glass-card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.style.animation = 'fadeInUp 0.6s ease forwards';
            });
        });
    </script>

    <style>
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .legend {
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
    </style>
</body>
</html>